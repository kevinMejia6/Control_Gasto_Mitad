<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Control de Quincenas</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-50 text-slate-800">

<div class="min-h-screen max-w-7xl mx-auto p-4 space-y-6">

<!-- HEADER -->
<header class="bg-white rounded-2xl shadow p-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
  <div>
    <h1 class="text-xl font-bold">ðŸ’¸ Control de Quincenas</h1>
    <p class="text-sm text-slate-500">Mitad Â· Total Â· Q1 Â· Q2</p>
  </div>

  <div class="flex gap-2 flex-wrap">
    <input id="deposito" type="number" step="0.01"
      class="px-3 py-2 rounded-xl border"
      value="418.52">

    <select id="quincenaActual" class="px-3 py-2 rounded-xl border">
      <option value="1">Primera quincena</option>
      <option value="2">Segunda quincena</option>
    </select>

    <select id="filtroTipo" class="px-3 py-2 rounded-xl border">
      <option value="ALL">Todos</option>
      <option value="MITAD">Solo Mitad</option>
      <option value="TOTAL">Solo Total</option>
    </select>
  </div>
</header>

<!-- RESUMEN -->
<section class="grid md:grid-cols-3 gap-4">
  <div class="bg-white p-4 rounded-2xl shadow">
    <p class="text-sm text-slate-500">Total quincena</p>
    <p id="totalQuincena" class="text-2xl font-bold">$0.00</p>
  </div>
  <div class="bg-white p-4 rounded-2xl shadow">
    <p class="text-sm text-slate-500">Disponible</p>
    <p id="disponible" class="text-2xl font-bold">$0.00</p>
  </div>
  <div class="bg-white p-4 rounded-2xl shadow">
    <p class="text-sm text-slate-500">Estado</p>
    <p id="estado" class="text-lg font-semibold">â€”</p>
  </div>
</section>

<!-- TABLA -->
<section class="bg-white rounded-2xl shadow overflow-hidden">
<table class="w-full text-sm">
<thead class="bg-slate-200">
<tr>
  <th class="p-3 text-left">Pago</th>
  <th class="p-3 text-right">Total</th>
  <th class="p-3 text-center">Modo</th>
  <th class="p-3 text-center">Quincena</th>
  <th class="p-3 text-right">Pago</th>
</tr>
</thead>
<tbody id="tabla" class="divide-y"></tbody>
</table>
</section>

</div>

<script>
const gastos = [
  { nombre: "Gym", total: 23, modo: "MITAD", quincena: null },
  { nombre: "Tigo chip", total: 14.99, modo: "MITAD", quincena: null },
  { nombre: "Tigo casa", total: 42.97, modo: "MITAD", quincena: null },
  { nombre: "Tarjeta crÃ©dito", total: 63, modo: "MITAD", quincena: null },
  { nombre: "Cuchubal", total: 120, modo: "TOTAL", quincena: 1 },
  { nombre: "SÃºper", total: 50, modo: "TOTAL", quincena: 1 }
];

const tabla = document.getElementById("tabla");
const deposito = document.getElementById("deposito");
const quincenaActual = document.getElementById("quincenaActual");
const filtroTipo = document.getElementById("filtroTipo");

function money(n) {
  return "$" + n.toFixed(2);
}

function calcularPago(g) {
  const q = Number(quincenaActual.value);
  if (g.modo === "MITAD") return g.total / 2;
  if (g.modo === "TOTAL" && g.quincena === q) return g.total;
  return 0;
}

function render() {
  tabla.innerHTML = "";
  let total = 0;

  gastos.forEach(g => {
    if (filtroTipo.value !== "ALL" && filtroTipo.value !== g.modo) return;

    const pago = calcularPago(g);
    total += pago;

    tabla.innerHTML += `
      <tr>
        <td class="p-3">${g.nombre}</td>
        <td class="p-3 text-right">${money(g.total)}</td>
        <td class="p-3 text-center font-semibold">${g.modo}</td>
        <td class="p-3 text-center">${g.quincena ?? "Ambas"}</td>
        <td class="p-3 text-right font-bold">${money(pago)}</td>
      </tr>
    `;
  });

  const dep = Number(deposito.value);
  const disp = dep - total;

  document.getElementById("totalQuincena").textContent = money(total);
  document.getElementById("disponible").textContent = money(disp);

  const estado = document.getElementById("estado");
  estado.textContent = disp >= 0 ? "âœ… Bien" : "âŒ Falta";
  estado.className = disp >= 0
    ? "text-green-600 font-semibold"
    : "text-red-600 font-semibold";
}

deposito.addEventListener("input", render);
quincenaActual.addEventListener("change", render);
filtroTipo.addEventListener("change", render);

render();
</script>

</body>
</html>